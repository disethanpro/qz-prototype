# P8 - 历史记录页面说明

## 📋 页面定位

**P8（历史记录页面）是一个独立的历史记录查询和管理页面，不是 P5 的替代品。**

### 页面关系说明：

- **P4**：实时检测结果页（检测完成后立即显示）
- **P5**：历史记录管理页（管理员批量管理用）
- **P8**：历史记录查询页（操作员和管理员通用查询页面）

### 主要区别：

| 功能 | P4 | P5 | P8 |
|------|----|----|-----|
| 使用场景 | 检测完成后 | 管理员批量管理 | 历史记录查看 |
| 用户角色 | 操作员/管理员 | 仅管理员 | 操作员/管理员 |
| 数据范围 | 当前检测记录 | 全部历史记录 | 根据角色筛选 |
| 主要功能 | 查看结果、导出报表 | 批量操作、删除 | 查询、筛选、查看详情 |

## 🎯 P8 的主要功能

### 1. **筛选查询**
- 日期范围筛选
- 型号筛选
- 曲轴编号搜索
- 判定结果筛选
- 导出状态筛选

### 2. **权限控制**
- **操作员**：只能查看本人检测的记录
- **管理员**：可以查看所有记录 + 批量操作

### 3. **详情查看**
- 点击任意记录打开右侧抽屉
- 查看完整的三项检测数据
- 导出单条记录报表
- 管理员可删除记录

### 4. **批量操作（管理员）**
- 批量选择记录
- 批量导出报表
- 批量删除记录
- 二次确认 + 密码验证

## 🔧 使用场景

### 操作员使用场景：
1. 从 **P2（操作员首页）** 点击"历史记录"进入 P8
2. 查看自己的历史检测记录
3. 筛选特定日期或型号的记录
4. 点击记录查看详细检测数据
5. 导出需要的报表

### 管理员使用场景：
1. 从 **P6（管理员配置页）** 点击"历史记录"进入 P8
2. 查看所有操作员的检测记录
3. 批量选择记录进行导出
4. 删除错误或无效的记录
5. 数据统计和分析

## 📊 页面布局

```
┌─────────────────────────────────────────────────────────────┐
│  顶栏：标题 + 用户菜单（修改密码/锁屏/退出登录）             │
├─────────────────────────────────────────────────────────────┤
│  返回按钮：返回首页（操作员） / 返回配置页（管理员）         │
├─────────────────────────────────────────────────────────────┤
│  管理员工具栏（仅管理员）：全选 + 批量导出 + 批量删除       │
├─────────────────────────────────────────────────────────────┤
│  筛选区：日期/型号/编号/结果/导出状态 + 查询/重置按钮       │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  主表格：显示检测记录列表                                     │
│  - 点击行打开详情抽屉                                         │
│  - 管理员可勾选复选框                                         │
│  - 支持分页                                                   │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│  底部状态栏：角色 + 自检状态 + 当前时间                       │
└─────────────────────────────────────────────────────────────┘

                          右侧抽屉（点击记录后弹出）
                          ┌─────────────────────────┐
                          │  检测记录详情            │
                          ├─────────────────────────┤
                          │  基本信息                │
                          │  跳动量检测结果          │
                          │  粗糙度检测结果          │
                          │  直径检测结果            │
                          │                          │
                          │  [导出] [删除] [关闭]    │
                          └─────────────────────────┘
```

## 🔐 安全机制

1. **权限隔离**：操作员只能查看自己的记录
2. **密码验证**：所有导出和删除操作需要密码确认
3. **二次确认**：删除操作有警告提示
4. **操作日志**：记录所有操作行为（待实现）

## 💡 演示功能

为了方便测试，页面内置了以下演示功能：

- **双击顶部标题**：可在"操作员"和"管理员"角色之间切换
- **模拟数据**：自动生成 50 条测试记录
- **完整流程**：所有功能都可以完整测试

## 🚀 后续优化建议

1. 添加导出格式选择（Excel / PDF）
2. 支持更多筛选条件（操作员、检测状态等）
3. 添加数据统计图表
4. 支持记录对比功能
5. 添加打印功能

## 📝 注意事项

1. 页面采用 1920x1080 分辨率设计，会自动缩放适配不同屏幕
2. 抽屉采用覆盖模式，不会挤压左侧内容
3. 所有弹窗支持 ESC 键关闭
4. 复选框点击不会触发行点击事件
5. 详情抽屉中的数据为只读，不可编辑



